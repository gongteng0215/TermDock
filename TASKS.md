# TermDock 任务清单

> 基于 `PRD.md`，按 `MVP(P0)` 与 `V2(P1)` 维护。  
> 最后更新：2026-02-14

## 全局开发约束（持续生效）

- `Compact-first`：新增页面/面板/弹窗默认紧凑布局
- 信息密度优先：同屏展示更多核心信息，减少无效留白
- 一致性：同类组件保持统一间距、字号、交互反馈

## 当前发版判断

- 当前建议：可以先发 `v0.1.0-preview`（内测/灰度）
- 暂不建议：直接发公开 GA
- 发正式版前最低补齐项：
  - `P0-F3` 跨平台冒烟测试
  - `P0-F4` 打包与安装流程
  - `P0-E3` 全局错误恢复指引

## P0 进度总览（2026-02-14）

- `DONE`: 12
- `PARTIAL`: 11
- `TODO`: 9

### 已完成（DONE）

- `P0-A1` 工程骨架（Electron + React + TypeScript）
- `P0-A2` 三栏联动（Session / Terminal / SFTP）
- `P0-A4` 安全存储（`keytar` + fallback）
- `P0-B3` 会话删除与确认
- `P0-C1` xterm 渲染
- `P0-C2` SSH 连接封装（密码/私钥）
- `P0-C3` 终端 IO 通道
- `P0-C4` 多标签管理
- `P0-C6` macOS 优先快捷键体系（Win 使用 Ctrl）
- `P0-C7` 同会话多开
- `P0-C8` 终端右键菜单（含 Clear，可扩展）
- `P0-D1` SFTP 通道封装（复用连接）

### 部分完成（PARTIAL）

- `P0-A3` 已做 JSON CRUD，未迁移 SQLite/groups/recent_sessions
- `P0-B1` 会话列表 + 搜索过滤 + 收藏筛选已完成，分组树未完成
- `P0-B2` 创建/编辑可用，校验与批量编辑未完善
- `P0-B4` 已记录 `lastConnectedAt`，未建立独立 `recent_sessions` 表
- `P0-B5` 收藏已支持，分组视图下体验未打磨
- `P0-C5` KeepAlive + 自动重连已支持，缺显式手动重连入口
- `P0-D2` SFTP 面板已可用，折叠交互仍需完善
- `P0-D3` 目录浏览与紧凑列表已可用，异常态/完整文件信息仍需加强
- `P0-D4` 单文件上传下载 + 进度已可用，队列并发策略未完成
- `P0-D5` 新建目录/重命名/删除可用，递归删除与覆盖确认未完善
- `P0-D6` 文件拖拽上传可用，目录拖拽与批量交互待完善

### 未开始（TODO）

- `P0-A5` 本地结构化日志与错误采集
- `P0-E1` 启动性能优化与基准
- `P0-E2` 大文件传输内存优化专项
- `P0-E3` 全局可恢复错误提示
- `P0-E4` 崩溃恢复/持久化验证
- `P0-F1` 单元测试（连接层/数据层）
- `P0-F2` 集成测试（SSH + SFTP 主链路）
- `P0-F3` 跨平台冒烟测试（macOS/Win11）
- `P0-F4` 打包安装（DMG/EXE）

## P0 任务矩阵

| ID | 状态 | 说明 |
| --- | --- | --- |
| P0-A1 | DONE | 工程可启动 |
| P0-A2 | DONE | 三栏状态联动 |
| P0-A3 | PARTIAL | JSON 已落地，SQLite 未落地 |
| P0-A4 | DONE | 凭据安全存储已接入 |
| P0-A5 | TODO | 日志模块未完成 |
| P0-B1 | PARTIAL | 搜索/收藏筛选可用，分组树未做 |
| P0-B2 | PARTIAL | 表单可用，深校验与批量流程待补 |
| P0-B3 | DONE | 删除确认已实现 |
| P0-B4 | PARTIAL | 最近连接时间已记录，独立表未做 |
| P0-B5 | PARTIAL | 收藏能力已实现，分组态未打磨 |
| P0-C1 | DONE | xterm 正常工作 |
| P0-C2 | DONE | SSH 密码/私钥连接可用 |
| P0-C3 | DONE | shell stream 可用 |
| P0-C4 | DONE | 多标签可用 |
| P0-C5 | PARTIAL | 自动重连可用，手动重连入口待补 |
| P0-C6 | DONE | Cmd/Ctrl 快捷键体系可用 |
| P0-C7 | DONE | 同会话多 tab 可并行 |
| P0-C8 | DONE | 右键菜单可扩展 |
| P0-D1 | DONE | SFTP 复用 SSH 连接 |
| P0-D2 | PARTIAL | 面板可用，折叠/布局交互待完善 |
| P0-D3 | PARTIAL | 浏览/切换可用，异常态待补 |
| P0-D4 | PARTIAL | 上传下载可用，队列并发待补 |
| P0-D5 | PARTIAL | 基本文件操作可用，递归/覆盖待补 |
| P0-D6 | PARTIAL | 文件拖拽可用，目录拖拽待补 |
| P0-E1 | TODO | 性能基准未完成 |
| P0-E2 | TODO | 内存优化未开始 |
| P0-E3 | TODO | 全局恢复提示未完成 |
| P0-E4 | TODO | 异常恢复验证未完成 |
| P0-F1 | TODO | 单测未完成 |
| P0-F2 | TODO | 集成测试未完成 |
| P0-F3 | TODO | 跨平台冒烟未完成 |
| P0-F4 | TODO | 打包流程未完成 |

## 下一轮优先级（建议顺序）

1. `P0-F3` + `P0-F4`：先补最小可发布闭环
2. `P0-E3`：统一错误提示与恢复路径
3. `P0-D4` + `P0-D6`：传输队列与目录拖拽
4. `P0-A3`：SQLite 迁移（sessions/groups/recent_sessions）

## P1（V2）保留范围

- 分屏终端
- Snippets + 变量
- 端口转发 UI
- 远程文本快速编辑
- 批量执行
- 清屏热键可配置
