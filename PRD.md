好，那我直接给你一份**可以拿去立项 / 开发 / 拉人一起做的「完整 PRD」**。
我会按**产品级别**来写，而不是“功能清单”，并且**完全对齐 WindTerm 形态，但做减法**，适合你一个人或小团队推进。

---

# 产品需求文档（PRD）

## 1. 产品概述

### 1.1 产品名称（暂定）

**TermDock**

> 含义：Terminal + Dock，一站式终端工作台
> （名字你后面可以再改，不影响文档）

### 1.2 产品定位

一款 **面向开发者 / 运维人员的跨平台 SSH + SFTP 桌面客户端**，
以 **Mac 体验优先**，同时完整支持 **Windows 11**。

核心理念：

> **“一个窗口，完成你在服务器上的所有事”**

### 1.3 目标用户

* Java / 后端 / 前端 开发者
* 运维 / SRE
* 需要频繁 SSH + 上传文件 + 查看日志的技术人员

### 1.4 使用场景

* 日常开发：连测试机、查日志、跑脚本
* 运维操作：上传包、解压、重启服务
* 多服务器管理：dev / test / prod 并行操作

---

## 2. 产品目标

### 2.1 核心目标（MVP）

* 快速、安全地连接服务器
* 在**同一界面**完成：

  * SSH 终端操作
  * SFTP 文件上传 / 下载
  * 会话管理

### 2.2 非目标（MVP 不做）

* 企业级堡垒机（审计 / 审批 / 录像）
* 云端账号体系
* 移动端

---

## 3. 整体产品形态（WindTerm 风格）

### 3.1 主界面布局

```
┌───────────┬─────────────────────────────┬─────────────┐
│ Session   │  Terminal Tabs / Split Pane │   SFTP      │
│ Manager   │                             │  File View  │
│           │                             │ (Toggle)    │
└───────────┴─────────────────────────────┴─────────────┘
```

* 左：**Session Manager（会话树）**
* 中：**Terminal（多标签 / 分屏）**
* 右：**SFTP 文件管理（可折叠）**
* 默认视觉策略：**紧凑优先（Compact-first）**，以更高信息密度减少滚动和切换成本

---

## 4. 功能需求

## 4.1 会话管理（Session Manager）

### 功能点

* 会话 CRUD
* 分组（支持嵌套）
* 搜索 / 快速过滤
* 最近使用
* 收藏

### 会话字段

* 会话名
* Host
* Port（默认 22）
* Username
* 认证方式：

  * 密码
  * 私钥（支持 passphrase）
* 私钥路径
* 分组 / 标签
* 备注

### 安全要求

* ❌ 不允许明文存密码
* ✅ 密码 / passphrase 存系统安全存储

  * macOS：Keychain
  * Windows：Credential Manager

---

## 4.2 SSH 终端（Terminal）

### 基础功能

* 基于 xterm.js
* UTF-8 / 中文支持
* 复制 / 粘贴
* 滚动、清屏
* 终端右键上下文菜单（MVP 至少包含“清屏”选项，菜单项结构可扩展）

### 标签与分屏

* 多标签（MVP 必做）
* 同一会话支持多开（同一个 session 可打开多个 terminal tab 实例）
* 分屏（V2）

  * 横向 / 纵向

### 快捷键（Mac 优先）

* ⌘T：新标签
* ⌘W：关闭标签
* ⌘C：

  * 有选区 → 复制
  * 无选区 → 发送 SIGINT
* ⌘V：粘贴
* ⌘F：搜索终端内容
* 清屏快捷键（V2，默认键位待定，可配置）

### 连接管理

* 断线提示
* 手动重连
* 心跳保活（KeepAlive）
* 同会话多标签实例下，连接与状态独立可控

---

## 4.3 文件管理（SFTP）

### 展现方式

* 独立面板（右侧）
* 可折叠 / 展开
* 与当前 SSH 会话绑定

### 功能点

* 目录 / 文件列表
* 上传 / 下载
* 拖拽上传（Finder / Explorer → App）
* 新建目录
* 删除 / 重命名
* 文件覆盖确认

### 传输要求

* 显示进度条
* 使用 stream 方式（避免大文件内存占用）
* 并发控制（默认 2~4）

---

## 4.4 命令片段（Snippets）（V2）

* 常用命令模板
* 一键执行
* 支持变量（如 `$APP_NAME`）
* 作用范围：

  * 全局
  * 分组
  * 单会话

---

## 4.5 端口转发（V2）

* 本地端口转发
* UI 配置
* 可保存为会话配置

---

## 5. 非功能需求

### 5.1 性能

* 冷启动 < 3s（Mac）
* 终端无明显输入延迟
* 大文件上传不阻塞 UI

### 5.2 稳定性

* SSH / SFTP 异常要可恢复
* UI 崩溃不影响本地数据

### 5.3 兼容性

* macOS（主）
* Windows 11（必须可用）

### 5.4 界面密度与交互一致性（新增硬性约束）

* 后续新增功能默认遵循 **紧凑优先（Compact-first）**，除非有明确可用性反证
* 列表/面板/弹窗优先使用高信息密度布局，避免大面积留白和冗余装饰
* 桌面端首屏应尽量展示关键操作与核心信息，减少二级跳转
* 同类组件在不同模块保持一致的紧凑间距与字号策略

---

## 6. 技术方案

### 6.1 技术栈

* 桌面：Electron
* UI：React + TypeScript（可换 Vue）
* 终端：xterm.js
* SSH/SFTP：ssh2
* 数据库：SQLite
* 安全存储：keytar

### 6.2 连接模型（关键）

* 一个 SSH 连接：

  * shell → Terminal
  * sftp → File Manager
* 避免重复连接，提升体验

---

## 7. 数据设计（SQLite）

### sessions

| 字段               | 说明             |
| ---------------- | -------------- |
| id               | 主键             |
| name             | 会话名            |
| host             | 主机             |
| port             | 端口             |
| username         | 用户名            |
| auth_type        | password / key |
| private_key_path | 私钥路径           |
| group_id         | 分组             |
| remark           | 备注             |

### groups

| id | name | parent_id |

### recent_sessions

| session_id | last_used_at |

### snippets（V2）

| id | name | content | scope |

> ❌ 不存密码
> ✅ 只存 keytar key

---

## 8. 迭代计划

### V0.1（MVP，可用）

* 会话管理
* SSH 终端（多标签）
* 同一会话多开（同 session 多 tab）
* 终端右键菜单（含“清屏”选项，可扩展）
* SFTP 文件管理
* Keychain / Credential Manager
* Mac + Windows 打包

### V0.2（好用）

* Snippets
* 端口转发
* 分屏
* 终端清屏热键（可配置）
* 终端主题 / 字体

### V0.3（差异化）

* 项目维度（项目 = 会话 + 脚本 + 路径）
* 上传 → 解压 → 重启 模板
* 快速唤起（⌘K）

---

## 9. 产品边界声明

* 本产品不是堡垒机
* 不做合规审计
* 本地优先，不强制云端

---

## 10. 成功指标（你自己用得爽就是第一指标）

* 打开软件 → 10 秒内连上服务器
* 不再同时打开 Xshell + FileZilla
* 一天用 10+ 次仍不烦

---

如果你愿意，下一步我可以 **直接进入“工程级”阶段**：

* Electron 项目结构图
* 主进程 / 渲染进程职责划分
* ssh2 + xterm.js + sftp 的**关键代码骨架**
* 第一版任务拆解（按你一个人 2–3 周节奏）

你下一步更想看哪一个？
**① 技术架构图 + 目录结构**
**② 直接上代码骨架**
